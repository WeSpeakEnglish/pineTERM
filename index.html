<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pineTERM</title>
	<link rel="stylesheet" href="style.css">
<base target="_blank">
</head>
<body>
	
    <div class="container">
        <div class="header-row">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 100" width="480" height="100" style="max-width:100%;height:auto;position:relative;z-index:1;">
              <defs>
                <filter id="tg" x="-10%" y="-40%" width="120%" height="180%">
                  <feGaussianBlur stdDeviation="5" result="b"/>
                  <feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <!-- "pine" in app accent cyan -->
              <text x="22" y="66"
                font-family="'Courier New', Courier, monospace"
                font-size="62" font-weight="bold"
                fill="#00d4ff" filter="url(#tg)"
                letter-spacing="-1">pine</text>
              <!-- "TERM" slightly dimmer white-cyan -->
              <text x="168" y="66"
                font-family="'Courier New', Courier, monospace"
                font-size="62" font-weight="bold"
                fill="#e0f7ff"
                letter-spacing="-1">TERM</text>
              <!-- Blinking cursor in accent color -->
              <rect x="335" y="16" width="13" height="55" rx="2" fill="#00d4ff" opacity="0.9">
                <animate attributeName="opacity" values="0.9;0.08;0.9" dur="1.1s" repeatCount="indefinite"/>
              </rect>
              <!-- Tagline -->
              <text x="22" y="87"
                font-family="'Courier New', Courier, monospace"
                font-size="10" fill="#00d4ff" opacity="0.38" letter-spacing="2.2">WEB Â· UART Â· SERIAL TERMINAL</text>
              <!-- Bit-stream dots in accent -->
              <g opacity="0.22" transform="translate(302,88)">
                <rect x="0"   y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="7"   y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="14"  y="0" width="3" height="3" rx="0.8" fill="#0066aa"/>
                <rect x="21"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="28"  y="0" width="3" height="3" rx="0.8" fill="#0066aa"/>
                <rect x="35"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="42"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="49"  y="0" width="3" height="3" rx="0.8" fill="#0066aa"/>
                <rect x="56"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="63"  y="0" width="3" height="3" rx="0.8" fill="#0066aa"/>
                <rect x="70"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="77"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="84"  y="0" width="3" height="3" rx="0.8" fill="#0066aa"/>
                <rect x="91"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="98"  y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
                <rect x="105" y="0" width="3" height="3" rx="0.8" fill="#0066aa"/>
                <rect x="112" y="0" width="3" height="3" rx="0.8" fill="#00d4ff"/>
              </g>
            </svg>
            <button class="theme-toggle secondary" onclick="toggleTheme()" id="themeBtn">
                <span class="theme-toggle-icon" id="themeIcon">ðŸŒ™</span>
                <span class="theme-toggle-label" id="themeLabel">Night</span>
            </button>
        </div>

        <!-- Connection Panel -->
        <div class="panel">
            <div class="panel-title">Connection Settings</div>
            <div class="connection-row">
                <div class="input-group">
                    <label>Baud rate</label>
                    <select id="baudRate">
                        <option value="9600" selected>9600</option>
                        <option value="19200">19200</option>
                        <option value="38400">38400</option>
                        <option value="57600">57600</option>
                        <option value="115200">115200</option>
                        <option value="230400">230400</option>
                        <option value="460800">460800</option>
                        <option value="921600">921600</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Data bits</label>
                    <select id="dataBits">
                        <option value="7">7</option>
                        <option value="8" selected>8</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Stop bits</label>
                    <select id="stopBits">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Parity</label>
                    <select id="parity">
                        <option value="none" selected>None</option>
                        <option value="even">Even</option>
                        <option value="odd">Odd</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Flow Control</label>
                    <select id="flowControl">
                        <option value="none" selected>None</option>
                        <option value="hardware">Hardware</option>
                    </select>
                </div>
                <button id="connectBtn" onclick="toggleConnection()">Connect to UART</button>
            </div>
        </div>

        <!-- Send Command Panel -->
        <div class="panel">
            <div class="panel-title">Send Command</div>
            <div class="send-section">
                <div class="send-row">
                    <input type="text" id="hexInput" placeholder="50 51 52 (HEX bytes separated by space)" maxlength="200">
                    <button onclick="sendHex()">Send HEX</button>
                </div>
                <div class="send-row">
                    <input type="text" id="asciiInput" placeholder="PQR (ASCII text)">
                    <button onclick="sendAscii()">Send ASCII</button>
                </div>
                
                <div class="line-ending">
                    <span style="color: #8892b0; font-size: 13px;">At the end:</span>
                    <label class="radio-group">
                        <input type="radio" name="lineEnding" value="crlf" checked>
                        <span>Send CR LF</span>
                    </label>
                    <label class="radio-group">
                        <input type="radio" name="lineEnding" value="lf">
                        <span>Send LF</span>
                    </label>
                    <label class="radio-group">
                        <input type="radio" name="lineEnding" value="cr">
                        <span>Send CR</span>
                    </label>
                    <label class="radio-group">
                        <input type="radio" name="lineEnding" value="none">
                        <span>No ending</span>
                    </label>
                </div>

                <div class="json-section">
                    <span style="color: #8892b0; font-size: 13px;">Send JSON command sequence</span>
                    <input type="text" id="jsonFileName" placeholder="Cmd.json" readonly>
                    <button class="secondary" onclick="document.getElementById('jsonFile').click()">Select JSON</button>
                    <input type="file" id="jsonFile" accept=".json" style="display: none;" onchange="handleJsonSelect(this)">
                    <button id="sendJsonBtn" onclick="sendJsonCommands()">Send JSON Commands</button>
                    <button id="stopJsonBtn" class="danger" onclick="stopJsonCommands()" style="display:none;">Stop</button>
                </div>
            </div>
        </div>
<script src="term.js"></script>
        <!-- Combined Terminal Panel -->
        <div class="panel">
            <div class="terminal-tabs">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="switchTab('hex')">HEX VIEW</button>
                    <button class="tab-btn" onclick="switchTab('ascii')">ASCII VIEW</button>
                </div>
                <div class="timing-control">
                    <input type="checkbox" id="enableTiming" checked>
                    <span>Separated less than</span>
                    <input type="number" id="timingValue" value="5000" min="0" max="1000000" step="1000">
                    <span>Î¼Sec treat like one package</span>
                </div>
                <div class="terminal-controls" style="margin-left: auto;">
                    <button class="secondary" onclick="exportLog()">Export log</button>
                    <label class="checkbox-group">
                        <input type="checkbox" id="autoScroll" checked>
                        <span>Auto scroll</span>
                    </label>
                    <button class="secondary danger" onclick="clearTerminal()">Clear</button>
                </div>
            </div>
            
            <div class="terminal-container">
                <div class="terminal-body active" id="hexTerminal"></div>
                <div class="terminal-body ascii-view" id="asciiTerminal"></div>
            </div>
			<a href="https://github.com/WeSpeakEnglish/pineTERM" target="_blank">
					<svg width="16" height="16" viewBox="0 0 16 16" fill="#8892b0" style="vertical-align: text-bottom; margin-right: 4px;">
					<path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
					</svg><span id="commit-date" style="color: #8892b0; font-size: 13px;">Last commitâ€¦</span></a>
		<script>
			insertCommitDate();
		</script>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-indicator">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Disconnected</span>
        </div>
        <div class="stats">
            <div class="stat">
                <span>RX:</span>
                <span class="stat-value" id="rxCount">0 bytes</span>
            </div>
            <div class="stat">
                <span>TX:</span>
                <span class="stat-value" id="txCount">0 bytes</span>
            </div>
        </div>
    </div>


</body>
</html>